
路由器通过一个端口接收到了以太网包之后，会根据mac地址判断是否是转发给自己的包，如果是的话，他就会拆开以太网包，看里面的IP包的ip地址，根据ip地址来转发给自己连接的其他子网的路由器

所以这里非常关键的一点，就是路由器是工作在IP协议层的，他是基于IP协议来的，跟交换机不一样，交换机是工作在以太网协议层的，是基于以太网协议工作的

然后根据下一个路由器的ip地址查找对应的mac地址

路由器之间传输数据，其实也是很简单的，假设也是通过以太网方式来转发数据，那么就是给数据包加上下一个目标路由器的mac地址，接着发送到下一个路由器即可，这个时候会把数据包再次转换为电路信号发送出去

下一个路由器你可以想想肯定也是交换机先接收到数据包的，因为通过以太网协议和mac地址，让下一个路由器的交换机部分收到数据包，根据mac地址转发给下一个路由器，下一个路由器比对一下mac地址发现是给自己的

接着各个路由器之间都按照一样的思路不停的转发，最后一直转发到目标ip地址所在的子网的路由器上去，那个子网路由器再转发给目标的web服务器

这里的话要注意几个要点，一个是这里路由器再发送网络包的时候，其实是会自动拆包的，就是可能会把大的数据包再次拆分为小的包去发送，这是一个，大家需要注意一下

然后这里还有一个问题，假如说你的家用路由器跟下一个路由器之间是通过无线网连接的，或者是ADSL线路连接的，不是以太网连接的，那怎么办呢？其实很简单，你的路由器接收到数据之后，肯定会从里面拿出来ip地址，因为路由器的工作都是依托ip地址来的

接着假如说你是走以太网发送数据到下一个路由器，那就根据以太网协议，查询下一个路由器的ip地址对应的mac地址，然后通过以太网协议发送数据出去，这里会走一个广播的方式，广播到下一个路由器去

下一个路由器的交换机接收到了再转发给路由器，根据mac地址判断是自己的包，这都是走以太网协议的，对吧

那么如果是无线局域网或者是ADSL线路呢？那路由器就根据ip地址找到下一个路由器的ip地址，然后通过无线局域网的规范，或者是网络线路的规范，把数据转换为指定的格式，按照协议封装数据，接着转换为电路信号发送出去就可以了

