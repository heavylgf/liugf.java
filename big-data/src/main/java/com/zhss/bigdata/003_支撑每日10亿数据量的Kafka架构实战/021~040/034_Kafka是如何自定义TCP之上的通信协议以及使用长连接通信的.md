
kafka的通信主要发生于生产端和broker之间，broker和消费端之间，broker和broker之间，这些通信都是基于TCP协议进行的，
大家自己看看网络课程，底层基于TCP连接和传输数据，应用层的协议，是Kafka自己自定义的

所谓自定义协议，就是定好传输数据的格式，请求格式、响应格式，这样大家就可以统一按照规定好的格式来封装、传输和解析数据了

生产端发送数据到kafka broker来，此时发送的数据是这样子的：

sent data: 一大串数据

kafka broker直接就从sent data:截取一大段数据就可以用了，如果你没有自定义一套完整的协议，是没办法进行通信的

http协议，生产端也可以发送http协议的数据给kafka broker，http请求，http响应。应用层的协议，规定了数据请求和响应的种种
复杂的格式，大家全部按照这个格式和规范来走，不要乱来

request v1.1

isCache: true

一大串数据

对于生产端和broker，消费端和broker来说，还会基于TCP建立长连接（具体见网络课程），也就是维护一批长连接，然后通过固定的
连接不断的传输数据，避免频繁的创建连接和销毁连接的开销

broker端会构造一个请求队列，然后不停的获取请求放入队列，后台再搞一堆的线程来获取请求进行处理




